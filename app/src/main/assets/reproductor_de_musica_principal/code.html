<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Reproductor Matrix</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#06f957",
                        "background-light": "#f5f8f6",
                        "background-dark": "#0a100c",
                        "surface-dark": "#111813",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    boxShadow: {
                        'neon': '0 0 10px rgba(6, 249, 87, 0.5), 0 0 20px rgba(6, 249, 87, 0.3)',
                        'neon-sm': '0 0 5px rgba(6, 249, 87, 0.5)',
                    }
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f2316; }
        ::-webkit-scrollbar-thumb { background: #273a2d; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #06f957; }
        
        @keyframes equalize {
            0% { height: 20%; }
            50% { height: 100%; }
            100% { height: 20%; }
        }
        .bar { animation: equalize 1s infinite; display: none; } /* Oculto por defecto, se activa al sonar */
        .playing .bar { display: block; }
        .bar:nth-child(odd) { animation-duration: 0.8s; }
        .bar:nth-child(even) { animation-duration: 1.1s; }
    </style>
</head>
<body class="bg-background-light dark:bg-black font-display overflow-hidden h-screen w-screen selection:bg-primary selection:text-black">

<div class="relative h-full w-full flex flex-col border-[3px] border-primary shadow-neon dark:bg-background-dark overflow-hidden rounded-xl md:max-w-md md:mx-auto md:h-[90vh] md:my-[5vh]">
    <header class="shrink-0 flex items-center justify-between px-4 py-3 bg-surface-dark/90 backdrop-blur-md border-b border-primary/20 z-20">
        <div class="flex items-center gap-3">
            <button class="relative group flex items-center justify-center size-10 rounded-full bg-primary/10 border border-primary/30">
                <span id="mic-ping" class="absolute inline-flex h-full w-full rounded-full bg-primary opacity-20 animate-ping hidden"></span>
                <span class="material-symbols-outlined text-primary">mic</span>
            </button>
        </div>
        <div class="flex flex-col items-center">
            <h1 class="text-primary font-bold text-lg tracking-widest uppercase">System_Audio</h1>
            <span class="text-[10px] text-primary/60 tracking-[0.2em] font-medium">ONLINE // V.10.4</span>
        </div>
        <div class="flex items-center gap-3">
            <button class="flex items-center justify-center size-10 text-primary/70"><span class="material-symbols-outlined">keyboard</span></button>
        </div>
    </header>

    <main class="flex-1 overflow-y-auto pb-40 relative">
        <div class="sticky top-0 bg-background-dark/95 backdrop-blur-sm z-10 px-4 py-3 border-b border-white/5 flex justify-between items-end">
            <h2 class="text-white text-xl font-bold tracking-tight">DETECTED_FILES</h2>
            <span class="text-primary text-xs font-mono bg-primary/10 px-2 py-1 rounded border border-primary/20">LISTA LISTA</span>
        </div>

        <div id="playlist" class="flex flex-col">
            <div onclick="playSong('The_Matrix_Theme_Club_Mix.mp3', 'The Matrix Theme', 'Don Davis')" class="group relative flex items-center gap-4 px-4 py-3 hover:bg-primary/5 cursor-pointer border-l-4 border-transparent hover:border-primary">
                <div class="flex items-center justify-center rounded bg-primary/20 size-12 text-primary">
                    <span class="material-symbols-outlined">play_arrow</span>
                </div>
                <div class="flex flex-col flex-1 min-w-0">
                    <p class="text-gray-200 text-base font-bold truncate">The_Matrix_Theme_Club_Mix.mp3</p>
                    <p class="text-primary/60 text-xs mt-1">Don Davis</p>
                </div>
            </div>
            
            <div onclick="playSong('Clubbed_to_Death.mp3', 'Clubbed to Death', 'Rob Dougan')" class="group relative flex items-center gap-4 px-4 py-3 hover:bg-primary/5 cursor-pointer border-l-4 border-transparent hover:border-primary">
                <div class="flex items-center justify-center rounded bg-primary/20 size-12 text-primary">
                    <span class="material-symbols-outlined">play_arrow</span>
                </div>
                <div class="flex flex-col flex-1 min-w-0">
                    <p class="text-gray-200 text-base font-bold truncate">Clubbed_to_Death.mp3</p>
                    <p class="text-primary/60 text-xs mt-1">Rob Dougan</p>
                </div>
            </div>
        </div>
    </main>

    <div class="absolute bottom-0 w-full bg-[#080d09]/95 backdrop-blur-xl border-t-2 border-primary z-30 pb-6 pt-2 rounded-t-2xl">
        <div id="visualizer" class="flex justify-center items-end h-8 gap-[3px] px-6 mb-2 opacity-80">
            <div class="w-1.5 bg-primary bar h-[40%]"></div>
            <div class="w-1.5 bg-primary bar h-[80%]"></div>
            <div class="w-1.5 bg-primary bar h-[50%]"></div>
            <div class="w-1.5 bg-primary bar h-[90%]"></div>
            <div class="w-1.5 bg-primary bar h-[60%]"></div>
        </div>

        <div class="px-6 text-center mb-3">
            <div id="current-title" class="text-primary font-bold text-lg truncate">System Ready</div>
            <div id="current-artist" class="text-primary/60 text-xs font-mono uppercase">Waiting for input...</div>
        </div>

        <div class="px-6 flex items-center gap-3 mb-4">
            <span id="time-current" class="text-[10px] font-mono text-primary/70">0:00</span>
            <div class="relative flex-1 h-1.5 bg-[#1a2e20] rounded-full overflow-hidden">
                <div id="progress-bar" class="absolute top-0 left-0 h-full w-[0%] bg-primary"></div>
            </div>
            <span id="time-total" class="text-[10px] font-mono text-primary/70">0:00</span>
        </div>

        <div class="flex items-center justify-center gap-8 mb-6">
            <button class="text-primary/70"><span class="material-symbols-outlined text-4xl">skip_previous</span></button>
            <button id="play-btn" class="size-16 rounded-full bg-primary text-black flex items-center justify-center shadow-neon">
                <span class="material-symbols-outlined text-4xl" id="play-icon">play_arrow</span>
            </button>
            <button class="text-primary/70"><span class="material-symbols-outlined text-4xl">skip_next</span></button>
        </div>
    </div>
</div>

<script>
    const audio = new Audio();
    const playBtn = document.getElementById('play-btn');
    const playIcon = document.getElementById('play-icon');
    const progressBar = document.getElementById('progress-bar');
    const visualizer = document.getElementById('visualizer');
    
    function playSong(file, title, artist) {
        audio.src = "file:///android_asset/reproductor_principal/" + file;
        document.getElementById('current-title').innerText = title;
        document.getElementById('current-artist').innerText = artist;
        audio.play();
        playIcon.innerText = "pause";
        visualizer.classList.add('playing');
    }

    playBtn.addEventListener('click', () => {
        if (audio.paused) {
            audio.play();
            playIcon.innerText = "pause";
            visualizer.classList.add('playing');
        } else {
            audio.pause();
            playIcon.innerText = "play_arrow";
            visualizer.classList.remove('playing');
        }
    });

    audio.addEventListener('timeupdate', () => {
        const percent = (audio.currentTime / audio.duration) * 100;
        progressBar.style.width = percent + "%";
        
        let curMins = Math.floor(audio.currentTime / 60);
        let curSecs = Math.floor(audio.currentTime % 60);
        if (curSecs < 10) curSecs = "0" + curSecs;
        document.getElementById('time-current').innerText = curMins + ":" + curSecs;
    });

    audio.addEventListener('loadedmetadata', () => {
        let totMins = Math.floor(audio.duration / 60);
        let totSecs = Math.floor(audio.duration % 60);
        if (totSecs < 10) totSecs = "0" + totSecs;
        document.getElementById('time-total').innerText = totMins + ":" + totSecs;
    });
</script>

</body>
</html>
